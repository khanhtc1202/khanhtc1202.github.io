<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>A Sample App for Flux Architecture</title>
	<meta name="description" content="khanhtc personal&#39;s note">
	<meta name="author" content="khanhtc">
	
		<link rel="preconnect" href="https://cse.google.com">
		<link rel="preconnect" href="https://www.googleapis.com">
		<link rel="preconnect" href="https://www.google.com">
		<link rel="preconnect" href="https://clients1.google.com">
	
	
		<link rel="preconnect" href="https://cdn.mathjax.org">
	
	
</head>
<body>
	<header id="header">
	<a href="https://khanhtc1202.github.io/">khanhtc&#39;s blog</a> | ğŸ“£ <a href="https://khanhtc1202.github.io/index.xml">RSS</a> | ğŸ‘€ <a href="https://khanhtc1202.github.io/alive">Liveness check</a>
	<div class="gcse-search"></div>
	
	<nav>
		<ul>
			
			<li><a href="/about">about</a></li>
			
			<li><a href="https://github.com/khanhtc1202">github</a></li>
			
			<li><a href="https://leetcode.com/khanhtc">leetcode</a></li>
			
			<li><a href="https://www.linkedin.com/in/khanhtc1202">linkedin</a></li>
			
		</ul>
	</nav>
	
</header>

	
	<main>
		<article>
			<h1>A Sample App for Flux Architecture</h1>
			<time>15.04.2018 20:20</time>
			<div>
				<p>MÃ¬nh Ä‘Æ°á»£c tuyá»ƒn vá» lÃ m java dev nhÆ°ng do sá»‘ nhá», tá»« khi Ä‘i lÃ m Ä‘áº¿n giá» sá»‘ ngÃ y dev java cá»§a mÃ¬nh cháº¯c Ã­t hÆ¡n Ä‘áº§u ngÃ³n tay. Bá»‹ quÄƒng qua láº¡i lÃ m tá»« python, ruby, clojure, golang,&hellip;Ä‘áº¿n giá» thÃ¬ cÃ¡i gÃ¬ Ä‘áº¿n cÅ©ng pháº£i Ä‘áº¿n, mÃ¬nh bá»‹ dÃ­ sang lÃ m react trong má»™t dá»± Ã¡n má»›i. MÃ¬nh vá»‘n cá»±c kÃ¬ noob frontend app, nÃªn khi nháº­n Ä‘Æ°á»£c cá»¥m <code>flux architecture</code> trong má»™t buá»•i há»p ná», mÃ¬nh nháº­n ra ngay Ä‘áº¥y lÃ  cá»©u cÃ¡nh duy nháº¥t cá»§a mÃ¬nh ( ngoÃ i architecture ra thÃ¬ mÃ¬nh khÃ´ng Ä‘áº·c biá»‡t quan tÃ¢m cÃ¡i gÃ¬ láº¯m :)) ). Sau vÃ i giá» google thÃ¬ dÃ¹ tÃ¬m lÃ²i máº¯t mÃ¬nh cÅ©ng <code>khÃ´ng tháº¥y cÃ¡i sample nÃ o tá»­ táº¿ hoáº·c Ä‘á»§ Ä‘á»ƒ noobs nhÆ° mÃ¬nh hiá»ƒu</code> nÃªn quyáº¿t Ä‘á»‹nh tá»± lÃ m 1 cÃ¡i, dÃ¹ sao thÃ¬ tá»« hÆ°á»›ng architecture, flux cÅ©ng khÃ¡ lÃ  thÃº vá»‹.</p>
<!-- more -->
<p>NhÆ° tiÃªu Ä‘á», bÃ i viáº¿t khÃ´ng cÃ³ má»¥c Ä‘Ã­ch viáº¿t láº¡i flux lÃ  gÃ¬, chá»‰ Ä‘Æ¡n giáº£n lÃ  cung cáº¥p source code má»™t sample app thiáº¿t káº¿ theo flux ( sá»­ dá»¥ng react-redux ) cÃ¹ng vá»›i má»™t sá»‘ note cÃ¡ nhÃ¢n rÃºt ra Ä‘Æ°á»£c. Náº¿u khÃ´ng cÃ³ Ä‘á»§ thá»i gian Ä‘á»ƒ tiÃªu phÃ­, source code Ä‘Æ°á»£c public táº¡i <a href="https://github.com/khanhtc1202/flux-arch-sample">Ä‘Ã¢y</a>.</p>
<h2 id="khÃ¡i-quÃ¡t-vá»-flux">KhÃ¡i quÃ¡t vá» flux</h2>
<p>CÃ¡i nÃ y thÃ¬ mÃ¬nh tháº¥y trÃªn máº¡ng sau vÃ i phÃºt googling thÃ¬ cÃ³ ráº¥t nhiá»u rá»“i, vÃ­ dá»¥ nhÆ° á»Ÿ <a href="https://scotch.io/tutorials/creating-a-simple-shopping-cart-with-react-js-and-flux">Ä‘Ã¢y</a>, <a href="https://viblo.asia/p/flux-under-the-hood-NznmMd34Rr69">Ä‘Ã¢y</a> vÃ  cáº£ á»Ÿ <a href="https://blog.mimacom.com/introduction-to-react-and-flux/">Ä‘Ã¢y</a> ná»¯a. Pháº§n nÃ y khÃ¡ nhiá»u bÃ i vÃ  Ä‘áº§y Ä‘á»§ rá»“i, mÃ¬nh xin phÃ©p táº­p trung vÃ o implement vÃ  lÆ°u note :))</p>
<p>NgoÃ i nhá»¯ng bÃ i bÃªn trÃªn ra mÃ¬nh tháº¥y cÃ³ 1 bÃ i dá»‹ch trÃªn kipalog khÃ¡ hay vá» flux, cÃ³ thá»ƒ tÃ¬m tháº¥y táº¡i <a href="https://kipalog.com/posts/Huong-dan-va-giai-thich-Flux-bang-hinh-ve">Ä‘Ã¢y</a>.</p>
<p>Cáº­p nháº­t thÃªm má»™t bÃ i so sÃ¡nh vá» flux architecture vs mvc architecture mÃ¬nh cáº£m tháº¥y ráº¥t há»¯u Ã­ch táº¡i <a href="http://jonnyreeves.co.uk/2016/redux-middleware/">Ä‘Ã¢y</a>.</p>
<p><img src="https://media.giphy.com/media/yvAqpqJoPRvYMOVz5l/giphy.gif" alt=""></p>
<h2 id="implement-flux">Implement Flux</h2>
<p>ChÃºng ta Ä‘i implement má»™t sample app bao gá»“m 1 search box nháº­p tá»« khoÃ¡, káº¿t quáº£ tÃ¬m Ä‘Æ°á»£c in lÃªn trang nhÆ° sau. ( mÃ¬nh noob application nÃªn nÃ³ chá»‰ <code>Ä‘áº¹p</code> Ä‘Æ°á»£c Ä‘áº¿n váº­y lÃ  háº¿t sá»©c rá»“i :)) )</p>
<p><img src="https://media.giphy.com/media/RkN5nA5O00StGGwXVQ/giphy.gif" alt=""></p>
<p>Má»™t vÃ i Ä‘iá»ƒm chÃº Ã½ mÃ¬nh muá»‘n nháº¯c láº¡i trÆ°á»›c khi báº¯t tay vÃ o design</p>
<ol>
<li>View lÃ  táº­p há»£p cá»§a cÃ¡c components!!! Component nÃªn táº­p trung vÃ o chá»©c nÄƒng, khÃ´ng nÃªn táº­p trung vÃ o giao diá»‡n.</li>
<li>CÃ¡c component Ä‘Æ°á»£c define tuá»³ Ã½ báº¡n, tuy nhiÃªn tuyá»‡t Ä‘á»‘i khÃ´ng nÃªn define 1 component lá»›n nhiá»u logic ( náº¿u lo láº¯ng vá» viá»‡c view bá»‹ vá»¥n nhiá»u component thÃ¬ Ä‘á»c 3. )</li>
<li>Dá»¯ liá»‡u cá»§a cáº£ trang define thÃ´ng qua State cá»§a trang Ä‘Ã³. Sau má»—i action, State cá»§a trang Ä‘Æ°á»£c cáº­p nháº­t Ä‘áº¿n tráº¡ng thÃ¡i má»›i ( Ä‘iá»u nÃ y Ä‘áº£m báº£o view Ä‘á»“ng nháº¥t trÃ¡nh bá»‹ thay Ä‘á»•i do trigger á»Ÿ nhiá»u model khÃ¡c nhau | lÆ°u Ã½ trÃ¡nh nháº§m láº«n vá»›i State cá»§a component )</li>
<li>Chá»‰ cÃ³ cÃ¡c Action náº¯m biáº¿t cÃ¡ch thay Ä‘á»•i dá»¯ liá»‡u trÃªn view, khÃ´ng Ä‘Æ°á»£c thay Ä‘á»•i báº±ng báº¥t cá»© phÆ°Æ¡ng phÃ¡p nÃ o khÃ¡c, káº¿t quáº£ sau má»—i action Ä‘á»u lÃ  State má»›i cá»§a trang ( Ä‘iá»u nÃ y bá»• sung cho 3. )</li>
</ol>
<p>Xem hÃ¬nh dÆ°á»›i Ä‘á»ƒ cÃ³ hÃ¬nh dung tá»•ng quÃ¡t cá»§a cáº¥u trÃºc khi Ä‘áº£m báº£o nhá»¯ng chÃº Ã½ trÃªn:</p>
<p><img src="https://i.imgur.com/om44nEa.png" alt=""></p>
<p>Dá»±a theo tÆ° tÆ°á»Ÿng bÃªn trÃªn, ta thiáº¿t káº¿ má»™t project structure nhÆ° sau:</p>
<ul>
<li>
<p>CÃ¡c <code>Component</code> phÃ¡t sinh event, Ä‘Æ°á»£c xá»­ lÃ½ báº±ng cÃ¡c method ( Ä‘Ã£ Ä‘Æ°á»£c khai bÃ¡o nhÆ° lÃ  props (properties) cá»§a component ).</p>
</li>
<li>
<p>CÃ¡c <code>Action</code> ( cÃ³ vai trÃ² nhÆ° cÃ¡c callback ) Ä‘á»‹nh nghÄ©a phÆ°Æ¡ng thá»©c thay Ä‘á»•i dá»¯ liá»‡u trÃªn trang, káº¿t quáº£ tráº£ vá» lÃ  state má»›i.</p>
</li>
<li>
<p>CÃ¡c <code>Container</code> cÃ³ 2 nhiá»‡n vá»¥ chÃ­nh lÃ : <code>Bind data tá»« State cá»§a trang sang props cá»§a Component</code> vÃ  <code>Tuá»³ theo method Ä‘Ã£ declare trong props cá»§a Component, nÃ©m (dispatch) cÃ¡c Action thÃ­ch há»£p</code>. Nhiá»‡m vá»¥ nÃ y thá»±c hiá»‡n thÃ´ng qua 2 method chÃ­nh lÃ  <code>mapStateToProps</code> vÃ  <code>mapDispatchToProps</code>.</p>
</li>
<li>
<p>CÃ¡c <code>Reducer</code> lÃ  nÆ¡i kiá»ƒm soÃ¡t giÃ¡ trá»‹ <code>input cho State má»›i</code>. Method <code>combineReducers</code> merge output cá»§a cÃ¡c reducer gÃ¡n lÃ m giÃ¡ trá»‹ má»›i cho State.</p>
</li>
<li>
<p><code>state.js</code> define State struct cá»§a page app &amp; <code>store.js</code> lÃ  nÆ¡i gom Ä‘á»‘ng reducers bÃªn trÃªn láº¡i, quáº£n lÃ½ State cá»§a toÃ n bá»™ page Ä‘Ã³.</p>
</li>
</ul>
<blockquote>
<p>Nhá»¯ng Ä‘iá»u trÃªn Ä‘Æ°á»£c Ä‘áº£m báº£o bá»Ÿi <code>redux</code> vÃ  cÃ¡c method cá»§a libs nÃ y. Trong vÃ­ dá»¥ minh hoáº¡ mÃ¬nh dÃ¹ng libs <code>react-redux</code> Ä‘á»ƒ implement.</p>
</blockquote>
<p>Project&rsquo;s struct</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>.src
</span></span><span style="display:flex;"><span>â”œâ”€â”€ actions/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ components/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ containers/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ reducers/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ index.tsx
</span></span><span style="display:flex;"><span>â”œâ”€â”€ state.ts
</span></span><span style="display:flex;"><span>â””â”€â”€ store.ts
</span></span></code></pre></div><p>NgoÃ i ra thÃ¬ cÃ³ thá»ƒ chia thÃªm <code>types/</code> Ä‘á»ƒ define types hoáº·c action sá»­ dá»¥ng.</p>
<p>OK báº¯t tay vÃ o viáº¿t cháº¯c nhanh ngáº¥m hÆ¡n :))</p>
<p>Äá»ƒ implement sample app nÃ y mÃ¬nh chia nÃ³ ra thÃ nh 2 components lÃ : <code>SearchBox</code> vÃ  <code>SearchResults</code> tÆ°Æ¡ng á»©ng nhÆ° sau:</p>
<ol>
<li>Component: SearchBox | Action: Type, Search | StoreToState: queryString, queryResults</li>
<li>Component: SearchResults | Action: non ! StoreToState: non :))) ( tháº±ng ku nÃ y chá»‰ bind data tá»« state vÃ  show ra thÃ´i :)) )</li>
</ol>
<p>LÃ½ do mÃ¬nh chia ra nhÆ° bÃªn trÃªn thÃ nh 2 component Ä‘Æ¡n giáº£n chá»‰ lÃ  mÃ¬nh <code>thÃ­ch</code> nhÆ° váº­y :)) hÆ¡n ná»¯a, do kiáº¿n trÃºc Ä‘Ã£ flex nÃªn viá»‡c define thÃªm bá»›t cÃ¡c component ráº¥t dá»… dÃ ng, miá»…n lÃ  Ä‘áº£m báº£o Ä‘Ãºng cÃ¡c chÃº Ã½ Ä‘Ã£ nÃªu bÃªn trÃªn :)))</p>
<p>Ta cÃ³ trÃ¬nh tá»± implement.</p>
<p><img src="https://i.imgur.com/Hw7PGiw.jpg?1" alt=""></p>
<h3 id="define-state">Define state</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">export</span> <span style="color:#080;font-weight:bold">type</span> State = {
</span></span><span style="display:flex;"><span>  queryString: <span style="color:#888;font-weight:bold">string</span>;
</span></span><span style="display:flex;"><span>  results: <span style="color:#888;font-weight:bold">Array</span>&lt;<span style="color:#b06;font-weight:bold">Result</span>&gt;;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="implement-component">Implement component</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">type</span> Props = {
</span></span><span style="display:flex;"><span>    queryString: <span style="color:#888;font-weight:bold">string</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">type</span>: (text: <span style="color:#888;font-weight:bold">string</span>) =&gt; <span style="color:#080;font-weight:bold">void</span>;
</span></span><span style="display:flex;"><span>    search: () =&gt; <span style="color:#080;font-weight:bold">void</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">export</span> <span style="color:#080;font-weight:bold">default</span> <span style="color:#080;font-weight:bold">class</span> SearchBox <span style="color:#080;font-weight:bold">extends</span> React.Component&lt;<span style="color:#b06;font-weight:bold">Props</span><span style="color:#a61717;background-color:#e3d2d2">,</span> <span style="color:#369">any</span>&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">constructor</span>(props: <span style="color:#888;font-weight:bold">Props</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    render() { ... }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="implement-action">Implement action</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">export</span> <span style="color:#080;font-weight:bold">type</span> SearchAction = {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">type</span>: <span style="color:#d20;background-color:#fff0f0">&#34;SEARCH&#34;</span>;
</span></span><span style="display:flex;"><span>    results: <span style="color:#888;font-weight:bold">Array</span>&lt;<span style="color:#b06;font-weight:bold">Result</span>&gt;;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">export</span> <span style="color:#080;font-weight:bold">const</span> search = (): SearchAction =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#888">// TODO do http request for query results from api here
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span>    <span style="color:#080;font-weight:bold">const</span> results: <span style="color:#888;font-weight:bold">Array</span>&lt;<span style="color:#b06;font-weight:bold">Result</span>&gt; = [];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">return</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-weight:bold">type</span>: <span style="color:#d20;background-color:#fff0f0">&#34;SEARCH&#34;</span>,
</span></span><span style="display:flex;"><span>        results: <span style="color:#888;font-weight:bold">results</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>ChÃº Ã½ 1 Action báº¯t buá»™c cÃ³ trÆ°á»ng type nhÆ° sau ( lÃ½ do thÃ¬ á»Ÿ <a href="https://fromnoobstogeeks.com/2018/04/15/flux-arch/#Implement-reducer">Ä‘Ã¢y</a> )</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">type</span> SearchAction = {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">type</span>: <span style="color:#d20;background-color:#fff0f0">&#34;SEARCH&#34;</span>;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="implement-container">Implement container</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">type</span> DispatchProps = {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">type</span>: (text: <span style="color:#888;font-weight:bold">string</span>) =&gt; <span style="color:#080;font-weight:bold">void</span>;
</span></span><span style="display:flex;"><span>    search: () =&gt; <span style="color:#080;font-weight:bold">void</span>;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">const</span> mapStateToProps: <span style="color:#888;font-weight:bold">MapStateToProps</span>&lt;<span style="color:#b06;font-weight:bold">any</span><span style="color:#a61717;background-color:#e3d2d2">,</span> <span style="color:#369">any</span><span style="color:#a61717;background-color:#e3d2d2">,</span> <span style="color:#369">State</span>&gt; = (state) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">const</span> queryString = state.queryString;
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">return</span> { queryString };
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">const</span> mapDispatchToProps: <span style="color:#888;font-weight:bold">MapDispatchToProps</span>&lt;<span style="color:#b06;font-weight:bold">DispatchProps</span><span style="color:#a61717;background-color:#e3d2d2">,</span> <span style="color:#369">any</span>&gt; = (
</span></span><span style="display:flex;"><span>    dispatch: <span style="color:#888;font-weight:bold">Dispatch</span>&lt;<span style="color:#b06;font-weight:bold">any</span>&gt;
</span></span><span style="display:flex;"><span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">return</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-weight:bold">type</span>: (text: <span style="color:#888;font-weight:bold">string</span>) =&gt; { dispatch(<span style="color:#080;font-weight:bold">type</span>(text)); },
</span></span><span style="display:flex;"><span>        search: () =&gt; { dispatch(search()); }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">export</span> <span style="color:#080;font-weight:bold">default</span> connect(mapStateToProps, mapDispatchToProps)(SearchBox);
</span></span></code></pre></div><p><code>State</code> bÃªn trÃªn lÃ  state cá»§a page app.</p>
<p><code>queryString</code> props cá»§a <code>component SearchBox</code> Ä‘Æ°á»£c map vá»›i <code>queryString</code> strong <code>State</code>.</p>
<p><code>type</code> vÃ  <code>search</code> props cá»§a <code>component SearchBox</code> Ä‘Æ°á»£c <code>trigger Ä‘á»ƒ dispatch action</code> phÃ¹ há»£p.</p>
<h3 id="implement-reducer">Implement reducer</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">const</span> initialState: <span style="color:#888;font-weight:bold">Array</span>&lt;<span style="color:#b06;font-weight:bold">Result</span>&gt; = [];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">export</span> <span style="color:#080;font-weight:bold">default</span> (state: <span style="color:#888;font-weight:bold">Array</span>&lt;<span style="color:#b06;font-weight:bold">Result</span>&gt; = initialState, action: <span style="color:#888;font-weight:bold">SearchAction</span>): <span style="color:#038">Array</span>&lt;<span style="color:#b06;font-weight:bold">Result</span>&gt; =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">switch</span> (action.<span style="color:#080;font-weight:bold">type</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-weight:bold">case</span> <span style="color:#d20;background-color:#fff0f0">&#34;SEARCH&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-weight:bold">return</span> action.results
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-weight:bold">default</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-weight:bold">return</span> state;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>ChÃº Ã½ <code>action.type</code> Ä‘Ã£ define bÃªn trÃªn Ä‘Æ°á»£c dÃ¹ng á»Ÿ Ä‘Ã¢y.</p>
<p>GiÃ¡ trá»‹ tráº£ vá» cá»§a cÃ¡c reducer Ä‘Æ°á»£c merge láº¡i táº¡i <code>reducer/index.js</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">import</span> { combineReducers } <span style="color:#080;font-weight:bold">from</span> <span style="color:#d20;background-color:#fff0f0">&#39;redux&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">export</span> <span style="color:#080;font-weight:bold">default</span> combineReducers({
</span></span><span style="display:flex;"><span>    queryString: <span style="color:#888;font-weight:bold">Type</span>,
</span></span><span style="display:flex;"><span>    results: <span style="color:#888;font-weight:bold">Search</span>,
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>ChÃº Ã½ State struct Ä‘Æ°á»£c map vá»›i káº¿t quáº£ tráº£ vá» cá»§a <code>combieReducers</code>.</p>
<h3 id="store-vÃ -indextsx">Store vÃ  Index.tsx</h3>
<p>./store.ts</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">import</span> { applyMiddleware, createStore } <span style="color:#080;font-weight:bold">from</span> <span style="color:#d20;background-color:#fff0f0">&#39;redux&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">import</span> { createLogger } <span style="color:#080;font-weight:bold">from</span> <span style="color:#d20;background-color:#fff0f0">&#39;redux-logger&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">import</span> reducers <span style="color:#080;font-weight:bold">from</span> <span style="color:#d20;background-color:#fff0f0">&#34;./reducers&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">const</span> store = createStore(
</span></span><span style="display:flex;"><span>  reducers,
</span></span><span style="display:flex;"><span>  applyMiddleware(createLogger())
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">export</span> <span style="color:#080;font-weight:bold">default</span> store;
</span></span></code></pre></div><p>./index.tsx</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">import</span> { Provider } from <span style="color:#d20;background-color:#fff0f0">&#39;react-redux&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">import</span> store from <span style="color:#d20;background-color:#fff0f0">&#34;./store&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">import</span> SearchBox from <span style="color:#d20;background-color:#fff0f0">&#34;./containers/SearchBox&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">import</span> SearchResults from <span style="color:#d20;background-color:#fff0f0">&#34;./containers/SearchResults&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;Provider store={store}&gt;
</span></span><span style="display:flex;"><span>    &lt;div&gt;
</span></span><span style="display:flex;"><span>        &lt;SearchBox/&gt;
</span></span><span style="display:flex;"><span>        &lt;SearchResults/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#a61717;background-color:#e3d2d2">/Provider&gt;,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#038">document</span>.getElementById(<span style="color:#d20;background-color:#fff0f0">&#34;app&#34;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>ChÃº Ã½ module Ä‘Æ°á»£c import vÃ o táº¡i Ä‘Ã¢y lÃ  <code>containers</code> vÃ  <code>store</code>.</p>
<p>Vá» <code>Provider</code> cÃ³ thá»ƒ tÃ¬m tháº¥y giáº£i thÃ­ch chi tiáº¿t táº¡i <a href="https://github.com/reactjs/react-redux/blob/master/docs/api.md#provider-store">Ä‘Ã¢y</a> hoáº·c má»™t cÃ¢u há»i khÃ¡ hay Ä‘á»ƒ hiá»ƒu thÃªm vá» provider cÃ³ thá»ƒ tÃ¬m tháº¥y táº¡i <a href="https://github.com/reactjs/react-redux/issues/719">Ä‘Ã¢y</a>.</p>
<p>Ok DONE! Má»¥c tiÃªu lÃºc Ä‘áº§u do cay cÃº vÃ¬ khÃ´ng tÃ¬m Ä‘Æ°á»£c cÃ¡i sample nÃ o chi tiáº¿t cho flux nÃªn mÃ¬nh viáº¿t bÃ i nÃ y vá»›i mode noobs nhÆ° mÃ¬nh Ä‘á»c xong cÅ©ng lÃ m Ä‘Æ°á»£c :)). NhÆ°ng nghÄ© láº¡i thÃ¬ tut vá»›i sample thÃ¬ váº«n chá»‰ lÃ  sample thÃ´i, muá»‘n hiá»ƒu thÃ¬ cá»© clone vá» nghá»‹ch lÃ  nhanh nháº¥t :))</p>
<p>P/s:</p>
<ul>
<li>Project struct trÃªn lÃ  thÃ nh quáº£ 2 ngÃ y cÃ£i nhau vá»›i thanh niÃªn ngá»“i cáº¡nh mÃ¬nh á»Ÿ cÃ´ng ty, thanks to him :))</li>
<li>Sáº¿p :v anh cÃ³ vÃ´ tÃ¬nh Ä‘á»c Ä‘Æ°á»£c cÃ¡i Ä‘á»‘ng nÃ y thÃ¬ xin tha cho em, chá»‰ lÃ m frontend app ná»‘t thÃ¡ng nÃ y khÃ´ng em xin quit sá»›m :&rsquo;( .</li>
</ul>

			</div>
			
			<div>
				<ul id="tags">
					
					<li><a href="/tags/architecture">architecture</a></li>
					
					<li><a href="/tags/react">react</a></li>
					
				</ul>
			</div>
			
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/kadane-and-its-applications/">From subarray problems to Kadane and applications</a></li>
				
				<li><a href="/posts/an-approach-for-dp-problem/">An Approach for DP Problem</a></li>
				
				<li><a href="/posts/some-thought-about-tactics/">A breakthrough of my mind</a></li>
				
				<li><a href="/posts/concurrent-unit/">Process, Thread and Routine</a></li>
				
				<li><a href="/posts/complexity-classes/">Complexity Classes</a></li>
				
			</ul>
		</div>
	</div>
</aside>

<aside>
	<div>
    		
			<div>
				<h3>TAGS</h3>
			</div>
			<div>
				<ul>
					
					<li><a href="/tags/algorithm">algorithm</a></li>
					
					<li><a href="/tags/approx">approx</a></li>
					
					<li><a href="/tags/architecture">architecture</a></li>
					
					<li><a href="/tags/c/c&#43;&#43;">c/c&#43;&#43;</a></li>
					
					<li><a href="/tags/code">code</a></li>
					
					<li><a href="/tags/compiler">compiler</a></li>
					
					<li><a href="/tags/concurrent">concurrent</a></li>
					
					<li><a href="/tags/database">database</a></li>
					
					<li><a href="/tags/design">design</a></li>
					
					<li><a href="/tags/dev%20tool">dev tool</a></li>
					
					<li><a href="/tags/golang">golang</a></li>
					
					<li><a href="/tags/javascript">javascript</a></li>
					
					<li><a href="/tags/lock">lock</a></li>
					
					<li><a href="/tags/manual">manual</a></li>
					
					<li><a href="/tags/memory">memory</a></li>
					
					<li><a href="/tags/networks">networks</a></li>
					
					<li><a href="/tags/nodejs">nodejs</a></li>
					
					<li><a href="/tags/oop">oop</a></li>
					
					<li><a href="/tags/os">os</a></li>
					
					<li><a href="/tags/package%20manager">package manager</a></li>
					
					<li><a href="/tags/programming">programming</a></li>
					
					<li><a href="/tags/react">react</a></li>
					
					<li><a href="/tags/tactics">tactics</a></li>
					
					<li><a href="/tags/thinking">thinking</a></li>
					
					<li><a href="/tags/tree">tree</a></li>
					
					<li><a href="/tags/trick">trick</a></li>
					
				</ul>
			</div>
		
	</div>
</aside>



	<footer id="footer">
	<p>&copy; 2017-2024 <a href="https://khanhtc1202.github.io/">khanhtc&#39;s blog</a> | <a href="https://khanhtc1202.github.io/index.xml">RSS</a></p>
	<section><script async src="https://cse.google.com/cse.js?cx=009971123916912295303:lpg9aljzbui"></script>

	</section>
</footer>

</body>
</html>
