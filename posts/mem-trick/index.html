<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Memory trick</title>
	<meta name="description" content="khanhtc personal&#39;s note">
	<meta name="author" content="khanhtc">
	
		<link rel="preconnect" href="https://cse.google.com">
		<link rel="preconnect" href="https://www.googleapis.com">
		<link rel="preconnect" href="https://www.google.com">
		<link rel="preconnect" href="https://clients1.google.com">
	
	
		<link rel="preconnect" href="https://cdn.mathjax.org">
	
	
</head>
<body>
	<header id="header">
	<a href="https://khanhtc1202.github.io/">khanhtc&#39;s blog</a> | üì£ <a href="https://khanhtc1202.github.io/index.xml">RSS</a> | üëÄ <a href="https://khanhtc1202.github.io/alive">Liveness check</a>
	<div class="gcse-search"></div>
	
	<nav>
		<ul>
			
			<li><a href="/about">about</a></li>
			
			<li><a href="https://github.com/khanhtc1202">github</a></li>
			
			<li><a href="https://leetcode.com/khanhtc">leetcode</a></li>
			
			<li><a href="https://www.linkedin.com/in/khanhtc1202">linkedin</a></li>
			
		</ul>
	</nav>
	
</header>

	
	<main>
		<article>
			<h1>Memory trick</h1>
			<time>22.12.2017 18:42</time>
			<div>
				<p>N·∫øu ƒë√£ t·ª´ng c√≥ th·ªùi gian l√†m vi·ªác v·ªõi C (hay √¥ng n√†o kinh h∆°n l√†m h·∫≥n v·ªõi Assembly :) ) ch·∫Øc ai c≈©ng nh·ªõ s·ª± kinh ho√†ng c·ªßa <strong>core dump fail</strong> :&rsquo;( . D√π c√≥ s·ª≠ d·ª•ng <a href="https://en.wikipedia.org/wiki/GNU_Debugger"><code>gdb</code></a> debug th√¨ ch·∫Øc c≈©ng ph·∫£i b·ªè ra c·∫£ m·ªõ th·ªùi gian v√† c√¥ng s·ª©c m√† nhi·ªÅu khi l·ªói b·∫Øt ngu·ªìn t·ª´ nh·ªØng c√°i v·ªõ v·∫©n n√†o ƒë√≥ m√† b√¨nh th∆∞·ªùng ta kh√¥ng ƒë·ªÉ √Ω :&rsquo;( . M·∫∑t kh√°c b·∫°n n√™n th·∫•y may m·∫Øn khi √≠t ra c√≤n bi·∫øt ch∆∞∆°ng tr√¨nh ƒë√£ l·ªói ·ªü ƒë√¢u ƒë√≥ ƒë·ªÉ m√† s·ª≠a, c√≥ nh·ªØng l·ªói n·∫±m ·ªü nh∆∞ng n∆°i hi·ªÉm h∆°n - kh√¥ng l√†m cho ch∆∞∆°ng tr√¨nh d·ª´ng nh∆∞ng k·∫øt qu·∫£ th√¨ sai l√®. M·ªôt trong s·ªë nh·ªØng nguy√™n nh√¢n ch√≠nh d·∫´n ƒë·∫øn n√≥ l√† v·∫•n ƒë·ªÅ <a href="https://en.wikipedia.org/wiki/Overflow"><code>tr√†n s·ªë</code></a></p>
<!-- more -->
<p>H√¥m nay trong khi ƒëang m√≤ code h·ªá th·ªëng, m√¨nh v·ªõ ƒë∆∞·ª£c 1 ƒëo·∫°n ƒë·∫°i √Ω nh∆∞ sau.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C" data-lang="C"><span style="display:flex;"><span><span style="color:#888">// Same as (l+r)/2, but avoids overflow for
</span></span></span><span style="display:flex;"><span><span style="color:#888">// large l and h
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#888;font-weight:bold">int</span> m = l+(r-l)/<span style="color:#00d;font-weight:bold">2</span>;
</span></span></code></pre></div><p>Kh√¥ng c√≤n g√¨ ƒë·ªÉ n√≥i th√™m ngo√†i tuy·ªát v·ªùi :joy:</p>
<p>ƒêo·∫°n code tr√™n l√†m nhi·ªám v·ª• t√≠nh <strong>trung b√¨nh c·ªông c·ªßa 2 s·ªë l v√† r</strong> v·ªõi gi·∫£ thi·∫øt ƒë·∫ßu v√†o l√† <strong>l nh·ªè h∆°n ho·∫∑c b·∫±ng r</strong></p>
<p>Th√¥ng th∆∞·ªùng khi nghƒ© ƒë·∫øn t√≠nh trung b√¨nh c·ªông, b·∫°n cho r·∫±ng ƒë∆°n gi·∫£n ch·ªâ c·∫ßn <strong>c·ªông ch√∫ng l·∫°i v√† chia cho s·ªë s·ªë h·∫°ng</strong> nh∆∞ng ch√≠nh ph·∫ßn ƒë∆°n gi·∫£n ƒë√≥ khi·∫øn cho ch√∫ng ta nhi·ªÅu l√∫c <a href="https://i.ytimg.com/vi/Uvw0xNSj0H0/maxresdefault.jpg"><code>m·∫•t ng·ªß ƒë·∫øn m·∫•y ng√†y :)</code></a> (c√°i n√†y g·ª£i nh·ªõ ƒë·∫øn d·∫•u <code>;</code> th·∫ßn th√°nh ho·∫∑c <code>}</code> m√† ch·∫Øc ai c≈©ng ƒë√£ d√≠nh r·ªìi :joy: ).</p>
<p>B·∫°n c≈©ng c√≥ th·ªÉ d·ªÖ d√†ng d√≠nh tr√†n s·ªë v·ªõi nh·ªØng ƒëo·∫°n code ki·ªÉu n√†y - m√† m√¨nh nghƒ© ch·∫Øc c≈©ng kh√¥ng √≠t ng∆∞·ªùi v·∫´n l√†m th·∫ø :)) bao g·ªìm c·∫£ ng∆∞·ªùi ƒëang vi·∫øt b√†i n√†y :'(</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C" data-lang="C"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">for</span>(<span style="color:#888;font-weight:bold">int</span> i = <span style="color:#00d;font-weight:bold">0</span>; i &lt; length; i++) {
</span></span><span style="display:flex;"><span>    sum += array[i];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Vi·ªác th·ª±c hi·ªán ph√©p c·ªông b·ª´a b√£i nhi·ªÅu khi th·ª±c s·ª± g√¢y ra nh·ªØng h·∫≠u qu·∫£ b·∫•t ng·ªù khi ƒëem ch·∫°y thu·∫≠t to√°n v·ªõi c√°c test case l·ªõn (ai ch∆°i codejam ch·∫Øc bi·∫øt r√µ v·ª• n√†y).</p>
<p>ƒêo·∫°n code m√¨nh v·ªõ ƒë∆∞·ª£c h√¥m nay ƒëem ƒë·∫øn 1 √Ω t∆∞·ªüng kh√¥ng m·ªõi (ch·∫Øc ai c≈©ng bi·∫øt nh∆∞ng ch·∫≥ng m·∫•y ƒë·ªÉ √Ω) v·ªÅ v·ª• tr√°nh l·ªói tr√†n s·ªë n√≥i tr√™n.</p>
<p>$$\begin{equation}
\dfrac{l + r}{2}
= \dfrac{2l + r - l}{2}
= \dfrac{l + (r - l)}{2}
\end{equation}$$</p>
<p>M·ªôt bi·∫øn ƒë·ªïi kh√° ƒë∆°n gi·∫£n nh∆∞ng ƒë√£ tr√°nh ho√†n to√†n ƒë∆∞·ª£c v·∫•n ƒë·ªÅ <strong>overflow</strong> n√≥i tr√™n. Ch√∫ √Ω r·∫±ng v·ªõi gi·∫£ thi·∫øt ƒë·∫ßu v√†o l√† <strong>l nh·ªè h∆°n b·∫±ng r</strong> ta lu√¥n c√≥ <strong>(r - l)</strong> n·∫±m trong range cho ph√©p c·ªßa ki·ªÉu m·∫´u, ƒë∆°n gi·∫£n l√† v√¨ b·∫°n ƒë√£ <strong>load ƒë∆∞·ª£c r v√†o b·ªô nh·ªõ th√¨ ch·∫≥ng c√≥ l√Ω do g√¨ kh√¥ng load ƒë∆∞·ª£c (r - l) &lt; r v√†o ƒë√≥ c·∫£</strong> :).</p>
<p>T·ªïng qu√°t l√™n m·ªôt ch√∫t ta c√≥ v·ªõi gi·∫£ thi·∫øt $X_{1} &lt; X_{2} &lt; &hellip; &lt; X_{n}$ c√πng ph√≠a so v·ªõi 0</p>
<p>$$\begin{equation}
\begin{aligned}
\dfrac{X_{1} + X_{2} + &hellip; + X_{n}}{n}
&amp;= \dfrac{nX_{1} + (X_{2} - X_{1}) + &hellip; + (X_{n} - X_{1})}{n} \
&amp;= X_{1} + \dfrac{(X_{2} - X_{1}) + &hellip; + (X_{n} - X_{1})}{n} \
&amp;= X_{1} + \sum_{k=2}^n{\dfrac{X_{k} - X_{1}}{n}}
\end{aligned}
\end{equation}$$</p>
<p>V√† v·ªõi c√°ch n√†y th√¨ b·∫°n c√≥ th·ªÉ tho·∫£i m√°i v√† y√™n t√¢m l√† kh√¥ng c√≥ chuy·ªán tr√†n s·ªë n·ªØa d√π test dataset c√≥ l·ªõn l√™n hay kh√¥ng :)).</p>

			</div>
			
			<div>
				<ul id="tags">
					
					<li><a href="/tags/trick">trick</a></li>
					
					<li><a href="/tags/os">os</a></li>
					
					<li><a href="/tags/memory">memory</a></li>
					
				</ul>
			</div>
			
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/cncf-ambassador-annoucement/">CNCF Ambassador Annoucement</a></li>
				
				<li><a href="/posts/kadane-and-its-applications/">From subarray problems to Kadane and applications</a></li>
				
				<li><a href="/posts/an-approach-for-dp-problem/">An Approach for DP Problem</a></li>
				
				<li><a href="/posts/some-thought-about-tactics/">A breakthrough of my mind</a></li>
				
				<li><a href="/posts/concurrent-unit/">Process, Thread and Routine</a></li>
				
			</ul>
		</div>
	</div>
</aside>

<aside>
	<div>
    		
			<div>
				<h3>TAGS</h3>
			</div>
			<div>
				<ul>
					
					<li><a href="/tags/algorithm">algorithm</a></li>
					
					<li><a href="/tags/annoucement">annoucement</a></li>
					
					<li><a href="/tags/approx">approx</a></li>
					
					<li><a href="/tags/architecture">architecture</a></li>
					
					<li><a href="/tags/c/c&#43;&#43;">c/c&#43;&#43;</a></li>
					
					<li><a href="/tags/cncf">cncf</a></li>
					
					<li><a href="/tags/code">code</a></li>
					
					<li><a href="/tags/community">community</a></li>
					
					<li><a href="/tags/compiler">compiler</a></li>
					
					<li><a href="/tags/concurrent">concurrent</a></li>
					
					<li><a href="/tags/database">database</a></li>
					
					<li><a href="/tags/design">design</a></li>
					
					<li><a href="/tags/dev%20tool">dev tool</a></li>
					
					<li><a href="/tags/golang">golang</a></li>
					
					<li><a href="/tags/javascript">javascript</a></li>
					
					<li><a href="/tags/lock">lock</a></li>
					
					<li><a href="/tags/manual">manual</a></li>
					
					<li><a href="/tags/memory">memory</a></li>
					
					<li><a href="/tags/networks">networks</a></li>
					
					<li><a href="/tags/nodejs">nodejs</a></li>
					
					<li><a href="/tags/oop">oop</a></li>
					
					<li><a href="/tags/os">os</a></li>
					
					<li><a href="/tags/package%20manager">package manager</a></li>
					
					<li><a href="/tags/programming">programming</a></li>
					
					<li><a href="/tags/react">react</a></li>
					
					<li><a href="/tags/tactics">tactics</a></li>
					
					<li><a href="/tags/thinking">thinking</a></li>
					
					<li><a href="/tags/tree">tree</a></li>
					
					<li><a href="/tags/trick">trick</a></li>
					
				</ul>
			</div>
		
	</div>
</aside>



	<footer id="footer">
	<p>&copy; 2017-2024 <a href="https://khanhtc1202.github.io/">khanhtc&#39;s blog</a> | <a href="https://khanhtc1202.github.io/index.xml">RSS</a></p>
	<section><script async src="https://cse.google.com/cse.js?cx=009971123916912295303:lpg9aljzbui"></script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>


	</section>
</footer>

</body>
</html>
