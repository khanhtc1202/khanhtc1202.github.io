<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Dining Philosophers</title>
	<meta name="description" content="khanhtc personal&#39;s note">
	<meta name="author" content="khanhtc">
	
		<link rel="preconnect" href="https://cse.google.com">
		<link rel="preconnect" href="https://www.googleapis.com">
		<link rel="preconnect" href="https://www.google.com">
		<link rel="preconnect" href="https://clients1.google.com">
	
	
		<link rel="preconnect" href="https://cdn.mathjax.org">
	
	
</head>
<body>
	<header id="header">
	<a href="https://khanhtc.me/">khanhtc&#39;s blog</a> | ğŸ“£ <a href="https://khanhtc.me/index.xml">RSS</a> | ğŸ‘€ <a href="https://khanhtc.me/alive">Liveness check</a>
	<div class="gcse-search"></div>
	
	<nav>
		<ul>
			
			<li><a href="/about">about</a></li>
			
			<li><a href="https://github.com/khanhtc1202">github</a></li>
			
			<li><a href="https://leetcode.com/khanhtc">leetcode</a></li>
			
			<li><a href="https://www.linkedin.com/in/khanhtc1202">linkedin</a></li>
			
		</ul>
	</nav>
	
</header>

	
	<main>
		<article>
			<h1>Dining Philosophers</h1>
			<time>04.11.2019 21:39</time>
			<div>
				<p>Bá»¯a tá»‘i cá»§a cÃ¡c triáº¿t gia (dining philosophers problem) lÃ  má»™t vÃ­ dá»¥ ná»•i tiáº¿ng khi nháº¯c Ä‘áº¿n cÃ¡c váº¥n Ä‘á» trong bÃ i toÃ¡n xá»­ lÃ½ concurrent.</p>
<p>Váº¥n Ä‘á» Ä‘Æ°á»£c phÃ¡t biá»ƒu nhÆ° sau: Cho 5 triáº¿t gia ngá»“i chung má»™t bÃ n trÃ²n vá»›i 5 chiáº¿c Ä‘Å©a xáº¿p xem káº½ giá»¯a 2 ngÆ°á»i ngá»“i cáº¡nh nhau nhÆ° hÃ¬nh</p>
<p><img src="https://sphof.readthedocs.io/_images/philtable.png" alt="Dining Philosophers"></p>
<p>img: sphof.readthedocs.io</p>
<p>Má»—i triáº¿t gia tÃ¬m cÃ¡ch Ä‘á»ƒ Äƒn Ä‘Æ°á»£c thá»©c Äƒn tá»« Ä‘Ä©a cá»§a mÃ¬nh vá»›i Ä‘iá»u kiá»‡n: &ldquo;chá»‰ ai cÃ³ 2 chiáº¿c Ä‘Å©a cáº¡nh mÃ¬nh má»›i Ä‘Æ°á»£c phÃ©p Äƒn&rdquo;, do Ä‘Ã³ há» láº§n lÆ°á»£t Ä‘á»•i tráº¡ng thÃ¡i giá»¯a Äƒn (eating) vÃ  Ä‘á»£i (thinking) :)) Má»—i ngÆ°á»i sau khi giá»¯a Ä‘Ã´i Ä‘Å©a Ä‘á»ƒ Äƒn sau 1 khoáº£ng thá»i gian pháº£i bá» láº¡i 2 chiáº¿c Ä‘Å©a vá» vá»‹ trÃ­ cÅ© Ä‘á»ƒ tiáº¿p tá»¥c quÃ¡ trÃ¬nh nÃ y. YÃªu cáº§u: tÃ¬m má»™t phÆ°Æ¡ng phÃ¡p Ä‘áº£m báº£o Ä‘á»ƒ cÃ¡c triáº¿t gia Ä‘á»u cÃ³ thá»ƒ Ä‘k Äƒn / Ä‘á»£i Ä‘á»•i lÆ°á»£t Ä‘á»ƒ khÃ´ng ai bá»‹ cháº¿t Ä‘Ã³i (chá»‰ Ä‘á»£i chá»© khÃ´ng Ä‘Æ°á»£c Äƒn).</p>
<h2 id="dá»±ng-mÃ´i-trÆ°á»ng-thÃ­-nghiá»‡m-vá»›i-rust">Dá»±ng mÃ´i trÆ°á»ng thÃ­ nghiá»‡m vá»›i Rust</h2>
<p>Trong bÃ i toÃ¡n nÃ y, cÃ³ 2 chá»§ thá»ƒ chÃ­nh cáº§n quan tÃ¢m lÃ  <strong>triáº¿t gia</strong> (philosopher) vÃ  <strong>Ä‘Å©a</strong> (chopstick).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">struct</span> <span style="color:#b06;font-weight:bold">Chopstick</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>id: <span style="color:#888;font-weight:bold">usize</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>by: <span style="color:#038">Option</span>&lt;<span style="color:#888;font-weight:bold">usize</span>&gt;,<span style="color:#bbb"> </span><span style="color:#888">// philosopher&#39;s id, None in case of no owner
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#080;font-weight:bold">struct</span> <span style="color:#b06;font-weight:bold">Philosopher</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>id: <span style="color:#888;font-weight:bold">usize</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>left: <span style="color:#b06;font-weight:bold">Arc</span>&lt;Mutex&lt;Chopstick&gt;&gt;,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>right: <span style="color:#b06;font-weight:bold">Arc</span>&lt;Mutex&lt;Chopstick&gt;&gt;,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Sá»­ dá»¥ng Mutex vÃ  smart pointer Arc ta cÃ³ struct Ä‘áº¡i diá»‡n cho philosopher vÃ  chopstick nhÆ° trÃªn.</p>
<p>Vá»›i chopstick, cÃ³ 2 methods cÆ¡ báº£n cáº§n thá»±c thi trÃªn nÃ³ lÃ  <em>láº¥y Ä‘Å©a</em> vÃ  <em>tráº£ Ä‘Å©a</em> vá» vá»‹ trÃ­ ban Ä‘áº§u (hay tá»« bá» quyá»n sá»Ÿ há»¯u).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">impl</span><span style="color:#bbb"> </span>Chopstick<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">fn</span> <span style="color:#06b;font-weight:bold">get</span>(&amp;<span style="color:#080;font-weight:bold">mut</span><span style="color:#bbb"> </span>self,<span style="color:#bbb"> </span>p: <span style="color:#080">&amp;</span><span style="color:#b06;font-weight:bold">Philosopher</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">if</span><span style="color:#bbb"> </span>self.by<span style="color:#bbb"> </span>!=<span style="color:#bbb"> </span><span style="color:#038">None</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>panic!();<span style="color:#bbb"> </span><span style="color:#888">// Invalid state. Since chopstick should not belong to anyone when a philosopher gets it
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>println!(<span style="color:#d20;background-color:#fff0f0">&#34;Chopstick </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">: Picked up by Philosopher </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">&#34;</span>,<span style="color:#bbb"> </span>self.id,<span style="color:#bbb"> </span>p.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>self.by<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#038">Some</span>(p.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">fn</span> <span style="color:#06b;font-weight:bold">put</span>(&amp;<span style="color:#080;font-weight:bold">mut</span><span style="color:#bbb"> </span>self,<span style="color:#bbb"> </span>p: <span style="color:#080">&amp;</span><span style="color:#b06;font-weight:bold">Philosopher</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">if</span><span style="color:#bbb"> </span>self.by<span style="color:#bbb"> </span>!=<span style="color:#bbb"> </span><span style="color:#038">Some</span>(p.id)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>panic!();<span style="color:#bbb"> </span><span style="color:#888">// Invalid state. Since chopstick should belong to philosopher who trying to put it back
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>println!(<span style="color:#d20;background-color:#fff0f0">&#34;Chopstick </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">: Released by Philosopher </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">&#34;</span>,<span style="color:#bbb"> </span>self.id,<span style="color:#bbb"> </span>p.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>self.by<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#038">None</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Vá»›i philosopher, cÅ©ng cÃ³ 2 methods cÆ¡ báº£n cáº§n Ä‘Æ°á»£c thá»±c hiá»‡n trÃªn nÃ³ nhÆ° Ä‘Ã£ nÃªu trong váº¥n Ä‘á», Ä‘Ã³ lÃ : <em>Äƒn (khi cÃ³ Ä‘Å©a)</em> (eating) vÃ  <em>Ä‘á»£i</em> (vÃ¬ lÃ  philosopher nÃªn sáº½ nghÄ© lÃºc Ä‘á»£i :) )</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">impl</span><span style="color:#bbb"> </span>Philosopher<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">fn</span> <span style="color:#06b;font-weight:bold">think</span>(&amp;self)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>println!(<span style="color:#d20;background-color:#fff0f0">&#34;Philosopher </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">: Thinking...&#34;</span>,<span style="color:#bbb"> </span>self.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>thread::sleep(Duration::from_secs(<span style="color:#00d;font-weight:bold">2</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">fn</span> <span style="color:#06b;font-weight:bold">eat</span>(&amp;self)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#888">// Get left chopstick if available
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">mut</span><span style="color:#bbb"> </span>left_cs<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">if</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#038">Ok</span>(chopstick)<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>self.left.try_lock()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>chopstick<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>println!(<span style="color:#d20;background-color:#fff0f0">&#34;Philosopher </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">: OOPS! Left chopstick not available. Waiting...&#34;</span>,<span style="color:#bbb"> </span>self.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>self.left.lock().unwrap()<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>left_cs.get(self);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#888">// Get right chopstick if available
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">mut</span><span style="color:#bbb"> </span>right_cs<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">if</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#038">Ok</span>(chopstick)<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>self.right.try_lock()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>chopstick<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>println!(<span style="color:#d20;background-color:#fff0f0">&#34;Philosopher </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">: OOPS! Right chopstick not available. Waiting...&#34;</span>,<span style="color:#bbb"> </span>self.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>self.right.lock().unwrap()<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>right_cs.get(self);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#888">// Eat!
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">        </span>println!(<span style="color:#d20;background-color:#fff0f0">&#34;Philosopher </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">: Eating...&#34;</span>,<span style="color:#bbb"> </span>self.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>thread::sleep(Duration::from_secs(<span style="color:#00d;font-weight:bold">4</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#888">// Put back both chopsticks
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">        </span>right_cs.put(self);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>left_cs.put(self);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>HÃ m eating lÃ  cáº§n quan tÃ¢m Ä‘áº¿n á»Ÿ bÃ i toÃ¡n nÃ y. Trong phiÃªn báº£n trÃªn, má»—i triáº¿t gia tÃ¬m cÃ¡ch láº¥y láº§n lÆ°á»£t Ä‘Å©a bÃªn trÃ¡i vÃ  pháº£i cá»§a mÃ¬nh vÃ  tráº£ láº¡i vá»‹ trÃ­ sau khi Ä‘Ã£ Äƒn xong.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">fn</span> <span style="color:#06b;font-weight:bold">main</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span>cs1<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>Arc::new(Mutex::new(Chopstick::new(<span style="color:#00d;font-weight:bold">1</span>)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span>cs2<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>Arc::new(Mutex::new(Chopstick::new(<span style="color:#00d;font-weight:bold">2</span>)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span>cs3<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>Arc::new(Mutex::new(Chopstick::new(<span style="color:#00d;font-weight:bold">3</span>)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span>cs4<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>Arc::new(Mutex::new(Chopstick::new(<span style="color:#00d;font-weight:bold">4</span>)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span>cs5<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>Arc::new(Mutex::new(Chopstick::new(<span style="color:#00d;font-weight:bold">5</span>)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">mut</span><span style="color:#bbb"> </span>handles<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>vec![];<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>handles.push(deploy(<span style="color:#00d;font-weight:bold">1</span>,<span style="color:#bbb"> </span>cs1.clone(),<span style="color:#bbb"> </span>cs2.clone()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>handles.push(deploy(<span style="color:#00d;font-weight:bold">2</span>,<span style="color:#bbb"> </span>cs2.clone(),<span style="color:#bbb"> </span>cs3.clone()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>handles.push(deploy(<span style="color:#00d;font-weight:bold">3</span>,<span style="color:#bbb"> </span>cs3.clone(),<span style="color:#bbb"> </span>cs4.clone()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>handles.push(deploy(<span style="color:#00d;font-weight:bold">4</span>,<span style="color:#bbb"> </span>cs4.clone(),<span style="color:#bbb"> </span>cs5.clone()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>handles.push(deploy(<span style="color:#00d;font-weight:bold">5</span>,<span style="color:#bbb"> </span>cs5.clone(),<span style="color:#bbb"> </span>cs1.clone()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">for</span><span style="color:#bbb"> </span>handle<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">in</span><span style="color:#bbb"> </span>handles<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span>_<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>handle.join();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>Thá»­ nghiá»‡m vá»›i phiÃªn báº£n trÃªn, káº¿t quáº£ nhÆ° sau:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Philosopher 1: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 2: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 3: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 4: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 5: Thinking...
</span></span><span style="display:flex;"><span>Chopstick 1: Picked up by Philosopher <span style="color:#00d;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>Chopstick 4: Picked up by Philosopher <span style="color:#00d;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>Chopstick 2: Picked up by Philosopher <span style="color:#00d;font-weight:bold">2</span>
</span></span><span style="display:flex;"><span>Philosopher 2: OOPS! Right chopstick not available. Waiting...
</span></span><span style="display:flex;"><span>Philosopher 4: OOPS! Right chopstick not available. Waiting...
</span></span><span style="display:flex;"><span>Philosopher 1: OOPS! Right chopstick not available. Waiting...
</span></span><span style="display:flex;"><span>Chopstick 5: Picked up by Philosopher <span style="color:#00d;font-weight:bold">5</span>
</span></span><span style="display:flex;"><span>Philosopher 5: OOPS! Right chopstick not available. Waiting...
</span></span><span style="display:flex;"><span>Chopstick 3: Picked up by Philosopher <span style="color:#00d;font-weight:bold">3</span>
</span></span><span style="display:flex;"><span>Philosopher 3: OOPS! Right chopstick not available. Waiting...
</span></span></code></pre></div><p>Cháº¿t Ä‘á»©ng :)) Tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a bÃ n Äƒn nhÆ° trong káº¿t quáº£: má»—i triáº¿t gia giá»¯ 1 chiáº¿c Ä‘Å©a (lock) vÃ  Ä‘á»£i vÃ´ háº¡n thá»i gian vÃ¬ khÃ´ng ai Ä‘á»§ Ä‘Å©a Ä‘á»ƒ thá»±c hiá»‡n Äƒn vÃ  tráº£ láº¡i Ä‘Å©a vá» vá»‹ trÃ­.</p>
<h2 id="giáº£i-phÃ¡p">Giáº£i phÃ¡p</h2>
<p>NhÃ¬n vÃ o káº¿t quáº£ trÃªn, ta cÃ³ thá»ƒ nháº­n tháº¥y má»—i triáº¿t gia trong láº§n láº¥y Ä‘Å©a Ä‘áº§u tiÃªn chá»‰ cÃ³ thá»ƒ láº¥y Ä‘Ãºng 1 Ä‘Å©a vÃ  sá»‘ Ä‘Å©a Ä‘Ãºng báº±ng sá»‘ triáº¿t gia! Tá»« Ä‘Ã³ Ä‘Æ°a Ä‘áº¿n cÃ¡ch thá»© nháº¥t Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á».</p>
<blockquote>
<p>Cho sá»‘ Ä‘Å©a tá»‘i thiá»ƒu báº±ng vá»›i sá»‘ triáº¿t gia + 1</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">fn</span> <span style="color:#06b;font-weight:bold">main</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>...<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">mut</span><span style="color:#bbb"> </span>handles<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>vec![];<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>handles.push(deploy(<span style="color:#00d;font-weight:bold">1</span>,<span style="color:#bbb"> </span>cs1.clone(),<span style="color:#bbb"> </span>cs2.clone()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>handles.push(deploy(<span style="color:#00d;font-weight:bold">2</span>,<span style="color:#bbb"> </span>cs2.clone(),<span style="color:#bbb"> </span>cs3.clone()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>handles.push(deploy(<span style="color:#00d;font-weight:bold">3</span>,<span style="color:#bbb"> </span>cs3.clone(),<span style="color:#bbb"> </span>cs4.clone()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>handles.push(deploy(<span style="color:#00d;font-weight:bold">4</span>,<span style="color:#bbb"> </span>cs4.clone(),<span style="color:#bbb"> </span>cs5.clone()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#888">// handles.push(deploy(5, cs5.clone(), cs1.clone()));
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">for</span><span style="color:#bbb"> </span>handle<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">in</span><span style="color:#bbb"> </span>handles<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span>_<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>handle.join();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>NhÆ° váº­y á»Ÿ láº§n láº¥y Ä‘Å©a Ä‘áº§u tiÃªn; triáº¿t gia cuá»‘i cÃ¹ng (thá»© 4) sáº½ láº¥y Ä‘Æ°á»£c Ä‘Ã´i Ä‘Å©a cÃ³ id (4, 5) do khÃ´ng cÃ³ tranh cháº¥p quyá»n sá»­ dá»¥ng Ä‘Å©a thá»© 5 :))</p>
<p>CÃ¡ch trÃªn cÃ³ thá»ƒ Ä‘Ã£ giáº£i quyáº¿t Ä‘k váº¥n Ä‘á» tuy nhiÃªn Ä‘Ã£ vi pháº¡m Ä‘iá»u kiá»‡n Ä‘á» bÃ i vá» sá»‘ lÆ°á»£ng triáº¿t gia vÃ  Ä‘Å©a. NhÃ¬n láº¡i váº¥n Ä‘á» ta tháº¥y: má»—i triáº¿t gia cá»‘ gáº¯ng tranh cháº¥p quyá»n sá»Ÿ há»¯u 2 Ä‘Å©a vá»›i 2 ngÆ°á»i ngá»“i cáº¡nh mÃ¬nh vÃ  má»—i ngÆ°á»i chá»‰ ká»‹p láº¥y Ä‘Æ°á»£c (tháº¯ng) trong má»™t trong 2 láº§n tranh cháº¥p =&gt; lock. Tá»« Ä‘Ã³ dáº«n Ä‘áº¿n hÆ°á»›ng thá»© 2 Ä‘á»ƒ giáº£i quáº¿t</p>
<blockquote>
<p>Giáº£m sá»‘ láº§n tranh cháº¥p Ä‘á»ƒ giÃ nh Ä‘Å©a cá»§a Ã­t nháº¥t 1 triáº¿t gia Ä‘á»ƒ Ä‘áº£m báº£o cÃ³ Ã­t nháº¥t 1 ngÆ°á»i cÃ³ thá»ƒ Äƒn.</p>
</blockquote>
<p>CÃ³ 2 cÃ¡ch cÆ¡ báº£n Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c Ä‘iá»u kiá»‡n nÃ y:</p>
<p>2.1. YÃªu cáº§u má»—i triáº¿t gia Æ°u tiÃªn giÃ nh Ä‘Å©a cÃ³ id nhá» hÆ¡n trong 2 chiáº¿c cáº§n giÃ nh (triáº¿t gia thá»© 1 Æ°u tiÃªn chiáº¿c 1, triáº¿t gia thá»© 2 Æ°u tiÃªn chiáº¿c 2,&hellip;)</p>
<p>NhÆ° váº­y á»Ÿ vá»‹ trÃ­ cuá»‘i cÃ¹ng, triáº¿t gia thá»© 5 sáº½ Æ°u tiÃªn chiáº¿c Ä‘Å©a 1 thay vÃ¬ chiáº¿c Ä‘Å©a cÃ³ id = 5, trÃ¡nh tranh cháº¥p vá»›i triáº¿t gia ngay trÆ°á»›c mÃ¬nh (triáº¿t gia thá»© 4) =&gt; triáº¿t gia thá»© 4 cÃ³ thá»ƒ báº¯t Ä‘áº§u Äƒn.</p>
<p>2.2. YÃªu cáº§u triáº¿t gia á»Ÿ vá»‹ trÃ­ láº» Æ°u tiÃªn chiáº¿c Ä‘Å©a pháº£i, triáº¿t gia á»Ÿ vá»‹ trÃ­ cháºµn Æ°u tiÃªn giÃ nh Ä‘Å©a á»Ÿ bÃªn trÃ¡i (triáº¿t gia 1 Æ°u tiÃªn chiáº¿c 1, triáº¿t gia 2 Æ°u tiÃªn chiáº¿c 3,&hellip;)</p>
<p>Vá»›i cÃ¡ch nÃ y, cÃ¡c chiáº¿c Ä‘Å©a 2, 4 cÃ³ Ä‘á»™ Æ°u tiÃªn tháº¥p hÆ¡n Ä‘á»‘i vá»›i táº¥t cáº£ cÃ¡c triáº¿t gia, do Ä‘Ã³ triáº¿t gia Ä‘Ã£ cÃ³ trong tay 1 chiáº¿c Ä‘Å©a cÃ³ thá»ƒ dá»… dÃ ng láº¥y chÃºng mÃ  khÃ´ng gáº·p pháº£i tranh cháº¥p. Vá»›i bÃ i toÃ¡n 5 triáº¿t gia, á»Ÿ lÆ°á»£t Ä‘áº§u tiÃªn triáº¿t gia thá»© nháº¥t (Ä‘Ã´i Ä‘Å©a 1,2) vÃ  thá»© tÆ° (Ä‘Ã´i Ä‘Å©a 4,5) cÃ³ thá»ƒ báº¯t Ä‘áº§u Äƒn.</p>
<p>á» má»™t hÆ°á»›ng khÃ¡c, cÃ³ thá»ƒ phÃ¡t triá»ƒn hÆ°á»›ng tiáº¿p cáº­n giáº£m thiá»ƒu trÃ¡nh cháº¥p trÃªn báº±ng viá»‡c:</p>
<blockquote>
<p>Äáº£m báº£o khi báº¥t cá»© triáº¿t gia nÃ o cÃ³ Ä‘Å©a, Ä‘Ã³ sáº½ lÃ  má»™t Ä‘Ã´i thay vÃ¬ má»™t chiáº¿c.</p>
</blockquote>
<p>NhÆ° váº­y má»—i triáº¿t gia sáº½: hoáº·c lÃ  cÃ³ 1 Ä‘Ã´i Ä‘Å©a vÃ  báº¯t Ä‘áº§u Äƒn, hoáº·c lÃ  khÃ´ng cÃ³ chiáº¿c nÃ o vÃ  ngá»“i nghÄ© :))</p>
<p>Viá»‡c nÃ y Ä‘áº£m báº£o khi Ä‘ang á»Ÿ tráº¡ng thÃ¡i nghÄ©, khÃ´ng cÃ³ triáº¿t gia nÃ o giá»¯ Ä‘Å©a khi nghÄ© gÃ¢y cáº£n trá»Ÿ cho nhá»¯ng triáº¿t gia khÃ¡c. CÃ³ 2 cÃ¡ch Ä‘á»ƒ thá»±c hiá»‡n Ä‘iá»u kiá»‡n nÃ y:</p>
<p>3.1. ThÃªm vÃ o bá»¯a tá»‘i má»™t bá»“i bÃ n, báº¥t cá»© triáº¿t gia muá»‘n sá»Ÿ há»¯u Ä‘Å©a pháº£i há»i bá»“i bÃ n vÃ  ngÆ°á»i nÃ y sáº½ giao cho ngÆ°á»i yÃªu cáº§u Ä‘Ã´i Ä‘Å©a Ä‘á»ƒ báº¯t Ä‘áº§u Äƒn hoáº·c tráº£ lá»i Ä‘Å©a Ä‘Ã£ Ä‘Æ°á»£c mÆ°á»£n vÃ  triáº¿t gia Ä‘Ã³ ngá»“i Ä‘á»£i trÆ°á»›c khi tiáº¿p tá»¥c há»i Ä‘Å©a.</p>
<p>Viá»‡c thá»±c thi cá»§a bá»“i bÃ n cÅ©ng khÃ¡ Ä‘Æ¡n giáº£n: quáº£n lÃ½ tráº¡ng thÃ¡i cá»§a cÃ¡c <strong>Ä‘Ã´i Ä‘Å©a</strong> xem chÃºng Ä‘ang thuá»™c vá» ai vÃ  giao cho ngÆ°á»i yÃªu cáº§u khi Ä‘Ã´i Ä‘Å©a Ä‘ang <em>free</em>, khi Ä‘Ã¡m Ä‘Ã´ng há»—n loáº¡n, thÃªm má»™t ngÆ°á»i quáº£n lÃ½ Ä‘á»ƒ Ä‘iá»u phá»‘ lÃ  cÃ¡ch nghÄ© thÃ´ng dá»¥ng vÃ  khÃ¡ hiá»‡u quáº£ :)) Tuy nhiÃªn cÃ¡ch nÃ y yÃªu cáº§u sá»­a Ä‘á»•i khÃ¡ nhiá»u: má»—i triáº¿t gia thay vÃ¬ yÃªu cáº§u 1 chiáº¿c Ä‘Å©a cáº§n yÃªu cáº§u 1 Ä‘Ã´i Ä‘Å©a; vÃ  báº£n thÃ¢n bá»“i bÃ n cÅ©ng yÃªu cáº§u resource Ä‘á»ƒ thá»±c thi (cháº¡y trong 1 thread giá»‘ng nhÆ° cÃ¡c triáº¿t gia), Ä‘á»“ng thá»i vai trÃ² táº­p trung cá»§a bá»“i bÃ n khiáº¿n cho chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ crash hoáº·c trá»Ÿ láº¡i treo trong trÆ°á»ng há»£p lá»—i á»Ÿ thread bá»“i bÃ n.</p>
<p>3.2. YÃªu cáº§u má»—i triáº¿t gia sáº½ tÃ¬m cÃ¡ch giÃ nh láº¥y má»™t Ä‘Ã´i Ä‘Å©a thay vÃ¬ giÃ nh tá»«ng chiáº¿c má»™t cá»§a má»™t Ä‘Ã´i.</p>
<p>CÃ¹ng má»™t hÆ°á»›ng tiáº¿p cáº­n trÃ¡nh lock khi triáº¿t gia giá»¯ 1 chiáº¿c Ä‘Å©a cáº£n trá»Ÿ cÃ¡c triáº¿t gia khÃ¡c báº±ng viá»‡c giÃ nh 1 Ä‘Ã´i thay vÃ¬ má»™t chiáº¿c; ta cÃ³ thá»ƒ implement má»™t cÃ¡ch Ä‘Æ¡n giáº£n nhÆ° sau:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">fn</span> <span style="color:#06b;font-weight:bold">eat</span>(&amp;self)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#888">// check left chopstick, wait if unavailable
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">mut</span><span style="color:#bbb"> </span>left_cs<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">if</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#038">Ok</span>(chopstick)<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>self.left.try_lock()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>chopstick<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>println!(<span style="color:#d20;background-color:#fff0f0">&#34;Philosopher </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">: OOPS! Left chopstick not available. Waiting...&#34;</span>,<span style="color:#bbb"> </span>self.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>self.left.lock().unwrap()<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#888">// check right chopstick, wait if unavailable
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">mut</span><span style="color:#bbb"> </span>right_cs<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">if</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">let</span><span style="color:#bbb"> </span><span style="color:#038">Ok</span>(chopstick)<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>self.right.try_lock()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>chopstick<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>println!(<span style="color:#d20;background-color:#fff0f0">&#34;Philosopher </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">: OOPS! Right chopstick not available. Waiting...&#34;</span>,<span style="color:#bbb"> </span>self.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>self.right.lock().unwrap()<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#888">// get both chopsticks if available
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#bbb">    </span>left_cs.get(self);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>right_cs.get(self);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>println!(<span style="color:#d20;background-color:#fff0f0">&#34;Philosopher </span><span style="color:#33b;background-color:#fff0f0">{}</span><span style="color:#d20;background-color:#fff0f0">: Eating...&#34;</span>,<span style="color:#bbb"> </span>self.id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>thread::sleep(Duration::from_secs(<span style="color:#00d;font-weight:bold">4</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>right_cs.put(self);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>left_cs.put(self);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>DONE! Vá»›i Ä‘iá»u kiá»‡n nÃ y, á»Ÿ lÆ°á»£t Ä‘áº§u tiÃªn, triáº¿t gia thá»© nháº¥t (Ä‘Ã´i Ä‘Å©a 1,2) vÃ  thá»© ba (Ä‘Ã´i Ä‘Å©a 3,4) giáº­t Ä‘Æ°á»£c Ä‘Ã´i Ä‘Å©a cá»§a mÃ¬nh vÃ  cÃ³ thá»ƒ báº¯t Ä‘áº§u Äƒn :))</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Philosopher 1: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 3: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 4: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 2: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 5: Thinking...
</span></span><span style="display:flex;"><span>Chopstick 1: Picked up by Philosopher <span style="color:#00d;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>Philosopher 2: OOPS! Left chopstick not available. Waiting...
</span></span><span style="display:flex;"><span>Philosopher 4: OOPS! Left chopstick not available. Waiting...
</span></span><span style="display:flex;"><span>Chopstick 2: Picked up by Philosopher <span style="color:#00d;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>Philosopher 1: Eating...
</span></span><span style="display:flex;"><span>Philosopher 5: OOPS! Right chopstick not available. Waiting...
</span></span><span style="display:flex;"><span>Chopstick 3: Picked up by Philosopher <span style="color:#00d;font-weight:bold">3</span>
</span></span><span style="display:flex;"><span>Chopstick 4: Picked up by Philosopher <span style="color:#00d;font-weight:bold">3</span>
</span></span><span style="display:flex;"><span>Philosopher 3: Eating...
</span></span><span style="display:flex;"><span>Chopstick 2: Released by Philosopher <span style="color:#00d;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>Chopstick 1: Released by Philosopher <span style="color:#00d;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>Chopstick 4: Released by Philosopher <span style="color:#00d;font-weight:bold">3</span>
</span></span><span style="display:flex;"><span>Chopstick 3: Released by Philosopher <span style="color:#00d;font-weight:bold">3</span>
</span></span><span style="display:flex;"><span>Philosopher 3: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 1: Thinking...
</span></span><span style="display:flex;"><span>Philosopher 4: OOPS! Right chopstick not available. Waiting...
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>Má»™t cÃ¡ch khÃ¡c lÃ  Chandy/Misra solution cÃ³ thá»ƒ tÃ¬m tháº¥y á»Ÿ <a href="https://en.wikipedia.org/w/index.php?title=Dining_philosophers_problem#Chandy/Misra_solution">Ä‘Ã¢y</a>.</p>
<p>Ref:</p>
<ul>
<li><a href="https://en.wikipedia.org/w/index.php?title=Dining_philosophers_problem">Dining philosophers problem</a></li>
<li><a href="https://gist.github.com/khanhtc1202/261e6a48c4f6fae517914915590d3c09">Source code</a></li>
</ul>

			</div>
			
			<div>
				<ul id="tags">
					
					<li><a href="/tags/algorithm">algorithm</a></li>
					
					<li><a href="/tags/lock">lock</a></li>
					
					<li><a href="/tags/concurrent">concurrent</a></li>
					
				</ul>
			</div>
			
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/kadane-and-its-applications/">From subarray problems to Kadane and applications</a></li>
				
				<li><a href="/posts/an-approach-for-dp-problem/">An Approach for DP Problem</a></li>
				
				<li><a href="/posts/some-thought-about-tactics/">A breakthrough of my mind</a></li>
				
				<li><a href="/posts/concurrent-unit/">Process, Thread and Routine</a></li>
				
				<li><a href="/posts/complexity-classes/">Complexity Classes</a></li>
				
			</ul>
		</div>
	</div>
</aside>

<aside>
	<div>
    		
			<div>
				<h3>TAGS</h3>
			</div>
			<div>
				<ul>
					
					<li><a href="/tags/algorithm">algorithm</a></li>
					
					<li><a href="/tags/approx">approx</a></li>
					
					<li><a href="/tags/architecture">architecture</a></li>
					
					<li><a href="/tags/c/c&#43;&#43;">c/c&#43;&#43;</a></li>
					
					<li><a href="/tags/code">code</a></li>
					
					<li><a href="/tags/compiler">compiler</a></li>
					
					<li><a href="/tags/concurrent">concurrent</a></li>
					
					<li><a href="/tags/database">database</a></li>
					
					<li><a href="/tags/design">design</a></li>
					
					<li><a href="/tags/dev%20tool">dev tool</a></li>
					
					<li><a href="/tags/golang">golang</a></li>
					
					<li><a href="/tags/javascript">javascript</a></li>
					
					<li><a href="/tags/lock">lock</a></li>
					
					<li><a href="/tags/manual">manual</a></li>
					
					<li><a href="/tags/memory">memory</a></li>
					
					<li><a href="/tags/networks">networks</a></li>
					
					<li><a href="/tags/nodejs">nodejs</a></li>
					
					<li><a href="/tags/oop">oop</a></li>
					
					<li><a href="/tags/os">os</a></li>
					
					<li><a href="/tags/package%20manager">package manager</a></li>
					
					<li><a href="/tags/programming">programming</a></li>
					
					<li><a href="/tags/react">react</a></li>
					
					<li><a href="/tags/tactics">tactics</a></li>
					
					<li><a href="/tags/thinking">thinking</a></li>
					
					<li><a href="/tags/tree">tree</a></li>
					
					<li><a href="/tags/trick">trick</a></li>
					
				</ul>
			</div>
		
	</div>
</aside>



	<footer id="footer">
	<p>&copy; 2017-2024 <a href="https://khanhtc.me/">khanhtc&#39;s blog</a> | <a href="https://khanhtc.me/index.xml">RSS</a></p>
	<section><script async src="https://cse.google.com/cse.js?cx=009971123916912295303:lpg9aljzbui"></script>

	</section>
</footer>

</body>
</html>
